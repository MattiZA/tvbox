version: "2"
services:
    dashboard:
      image: linuxserver/heimdall
      container_name: heimdall
      volumes:
        - /opt/tvbox/config/heimdall:/config 
      ports:
        - 5000:80
      restart: always
    plex:
      image: plexinc/pms-docker
      container_name: plex
      volumes:
        - /opt/tvbox/data/movies:/data/movies
        - /opt/tvbox/data/tv:/data/tv
        - /opt/tvbox/data/music:/data/music
        - /opt/tvbox/config/plex:/config
        - /opt/tvbox/data/transcode:/transcode
      restart: unless-stopped
      network_mode: "host"
    plexpy:
      image: tautulli/tautulli
      container_name: plexpy
      volumes:
        - /opt/tvbox/config/plexpy:/config
        - /opt/tvbox/config/plex/Library/Application\ Support/Plex\ Media\ Server/Logs/:/plex_logs:ro
      restart: unless-stopped
      ports:
        - 8181:8181
    sonarr:
      image: linuxserver/sonarr
      container_name: sonarr
      volumes:
        - /opt/tvbox/config/sonarr:/config
        - /opt/tvbox/data/tv:/tv
        - /etc/localtime:/etc/localtime:ro
        - /opt/tvbox/data/download/complete:/downloads
      restart: unless-stopped
      ports:
        - 8989:8989
    radarr:
       image: linuxserver/radarr
       container_name: radarr
       volumes:
        - /opt/tvbox/config/radarr:/config
        - /opt/tvbox/data/movies:/movies
        - /etc/localtime:/etc/localtime:ro
        - /opt/tvbox/data/download/complete:/downloads
       restart: unless-stopped
       ports:
        - 7878:7878
    deluge:
      image: linuxserver/deluge
      container_name: deluge
      volumes:
        - /opt/tvbox/config/deluge:/config
        - /opt/tvbox/data/download/incomplete:/downloads/incomplete
        - /opt/tvbox/data/download/complete:/downloads/complete
        - /opt/tvbox/data/download/blackhole:/downloads/blackhole
      restart: unless-stopped
      ports:
        - 8112:8112
        - 58846:58846
    updates:
      image: v2tec/watchtower
      container_name: watchtower
      volumes:
        - /var/run/docker.sock:/var/run/docker.sock
      restart: always
      command: --interval 30
    management:
      image: portainer/portainer
      container_name: portainer
      volumes:
        - /opt/tvbox/config/portainer:/data
        - /var/run/docker.sock:/var/run/docker.sock
      ports:
        - 9000:9000
      restart: always
